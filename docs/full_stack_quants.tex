\documentclass{beamer}
\usepackage{color}
\definecolor{deepblue}{rgb}{0,0,0.5}
\definecolor{deepred}{rgb}{0.6,0,0}
\definecolor{deepgreen}{rgb}{0,0.5,0}

\usepackage{listings}

\AtBeginSection[]
{
  \begin{frame}
    \frametitle{Table of Contents}
    \tableofcontents[currentsection]
  \end{frame}
}

\usetheme{PaloAlto}
\usecolortheme{seahorse}

\lstset{
	showstringspaces=false,
	keywordstyle=\color{deepblue},
	emph={Python.h, PyObject, PyArg_ParseTuple},          % Custom highlighting
	emphstyle=\color{deepred},    % Custom highlighting style
	stringstyle=\color{deepgreen},
	breakatwhitespace=false,         % sets if automatic breaks should only happen at whitespace
  	breaklines=true                 % sets automatic line breaking
}

\title{You can call your C++ code from Python}
\author{Jack Grahl}
\institute{PrismFP Analytics}

\begin{document}
	\frame{\titlepage}

	\section{Making a package}

	\begin{frame}[fragile]
		\frametitle{setuptools}
		\begin{lstlisting}[language=Python]
from setuptools import setup

setup(
    name='calexicon',
    version='0.1.2',
    description='Calendar stuff',
    url='http://github.com/jwg4/calexicon',
    author='Jack Grahl',
    author_email='jack.grahl@gmail.com',
    license='Apache License 2.0',
    packages=['calexicon'],
    test_suite='nose.collector',
    tests_require=['nose', 'hypothesis']
)
		\end{lstlisting}
	\end{frame}

	\section{PyObjects}

	\begin{frame}[fragile]
		\frametitle{Python.h}
		\begin{lstlisting}[language=C++]
#include <Python.h>
#include "Quantuccia/ql/time/calendar.hpp"
#include "Quantuccia/ql/time/date.hpp"
#include "Quantuccia/ql/time/calendars/unitedkingdom.hpp"
		\end{lstlisting}
	\end{frame}

	\begin{frame}[fragile]
		\frametitle{PyObject *args}
		\begin{lstlisting}[language=C++]
   static PyObject*
united_kingdom_is_business_day(PyObject *self, PyObject *args)
{
    int year;
    int month;
    int day;
    if (!PyArg_ParseTuple(args, "iii|", &year, &month, &day))
        return NULL;
    QuantLib::Day d(day);
    QuantLib::Month m = static_cast<QuantLib::Month>(month);
    QuantLib::Year y(year);
		\end{lstlisting}
	\end{frame}

	\begin{frame}[fragile]
		\frametitle{PyBool_FromLong}
		\begin{lstlisting}[language=C++]
static PyObject*
united_kingdom_is_business_day(PyObject *self, PyObject *args)
{
    // ...
    QuantLib::Date date(d, m, y);
    QuantLib::UnitedKingdom calendar(QuantLib::UnitedKingdom::Exchange);
    bool result = calendar.isBusinessDay(date);
    return PyBool_FromLong(result);
}
		\end{lstlisting}
	\end{frame}

\end{document}